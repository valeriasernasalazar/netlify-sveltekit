import { c as create_ssr_component, a as subscribe, b as add_attribute, e as escape, d as each } from "../../../../chunks/ssr.js";
import { w as writable } from "../../../../chunks/index2.js";
import "../../../../chunks/store.js";
import "../../../../chunks/client.js";
const css = {
  code: '.main-container.svelte-apnljb.svelte-apnljb{width:100%;max-width:600px;margin:auto;padding:20px;background:#fff;border-radius:10px;box-shadow:0 4px 8px rgba(0, 0, 0, 0.1);text-align:center;margin-bottom:30vh}.Mc.svelte-apnljb.svelte-apnljb{display:flex;flex-direction:column;min-height:10vh;gap:24px;padding:24px;width:26%;max-width:1000px;margin:0 auto;margin-right:10%;font-size:13px}.hB.svelte-apnljb button.svelte-apnljb{background:#d93443;color:white;padding:15px 15px;border:none;border-radius:4px;font-weight:700;display:flex;align-items:center;gap:4px}.hB.svelte-apnljb button.svelte-apnljb:hover{opacity:0.7;background-color:#fa6a02;cursor:pointer}.hB.svelte-apnljb.svelte-apnljb{display:flex;align-items:center;gap:10px}.form-container.svelte-apnljb.svelte-apnljb{margin-bottom:20px}.form-group.svelte-apnljb.svelte-apnljb{margin-bottom:15px;text-align:left}label.svelte-apnljb.svelte-apnljb{display:block;font-size:0.9em;margin-bottom:5px;color:#333}input[type="text"].svelte-apnljb.svelte-apnljb,input[type="date"].svelte-apnljb.svelte-apnljb{width:100%;padding:10px;border:1px solid #ccc;border-radius:5px;font-size:1em;box-sizing:border-box}button.svelte-apnljb.svelte-apnljb{width:100%;padding:10px;background:#d93443;color:white;border:none;border-radius:5px;cursor:pointer;font-size:1em}button.svelte-apnljb.svelte-apnljb:hover{opacity:0.7;background-color:#fa6a02}.section-title.svelte-apnljb.svelte-apnljb{margin-top:20px;margin-bottom:10px;color:black;text-align:center;margin-top:40px;font-size:30px}.card.svelte-apnljb.svelte-apnljb{background:#f8f9fa;padding:15px;border:1px solid #e9ecef;border-radius:5px;margin-bottom:10px;width:100%}.card-row.svelte-apnljb.svelte-apnljb{display:block;padding:5px 0;text-align:left}.card-key.svelte-apnljb.svelte-apnljb{font-weight:bold}.card-value.svelte-apnljb.svelte-apnljb{display:block;text-align:left;margin-left:10px}.error-message.svelte-apnljb.svelte-apnljb{font-size:1.2em;color:red;text-align:center;margin-top:20px}',
  map: `{"version":3,"file":"+page.svelte","sources":["+page.svelte"],"sourcesContent":["<script>\\n    import { writable } from 'svelte/store';\\n    import { authHandlers, storedNombreCompleto, storedFechaNacimiento } from '../../../store/store';\\n    import { goto } from '$app/navigation';\\n\\n    let nombrecompleto = '';\\n    let fechanacimiento = '';\\n    let ultimaFecha = '';\\n    let resultadoBusqueda = writable(null);\\n    let error = writable('');\\n    let formSubmitted = writable(false);\\n\\n    const preguntas = {\\n        nombrecompleto: 'Nombre completo',\\n        fechanacimiento: 'Fecha de nacimiento',\\n        ultimaFecha: 'Último día en Casa Monarca',\\n    };\\n\\n    async function buscar() {\\n        try {\\n            const response = await fetch('/api/decrypt', {\\n                method: 'POST',\\n                headers: {\\n                    'Content-Type': 'application/json'\\n                },\\n                body: JSON.stringify({\\n                    nombrecompleto,\\n                    fechanacimiento\\n                })\\n            });\\n\\n            if (response.ok) {\\n                const data = await response.json();\\n                console.log(\\"Datos recibidos:\\", data); // Verificación de datos recibidos\\n                resultadoBusqueda.set(data);\\n                error.set('');\\n                formSubmitted.set(true);\\n\\n                // Actualizar las tiendas con el nombre completo y la fecha de nacimiento\\n                storedNombreCompleto.set(nombrecompleto);\\n                storedFechaNacimiento.set(fechanacimiento);\\n            } else {\\n                const errorData = await response.text();\\n                error.set(errorData || 'Error desconocido');\\n            }\\n        } catch (err) {\\n            error.set(\`Error de conexión: \${err.message}\`);\\n        }\\n    }\\n\\n    async function darDeBaja() {\\n        try {\\n            const response = await fetch('/api/darDeBaja', {\\n                method: 'POST',\\n                headers: {\\n                    'Content-Type': 'application/json'\\n                },\\n                body: JSON.stringify({\\n                    nombrecompleto,\\n                    fechanacimiento,\\n                    ultimaFecha\\n                })\\n            });\\n\\n            if (response.ok) {\\n                const data = await response.json();\\n                console.log(\\"Estado actualizado:\\", data);\\n                // Aquí puedes actualizar el estado de la interfaz o notificar al usuario\\n                goto('/admin');\\n            } else {\\n                const errorData = await response.text();\\n                error.set(errorData || 'Error desconocido');\\n            }\\n        } catch (err) {\\n            error.set(\`Error de conexión: \${err.message}\`);\\n        }\\n    }\\n<\/script>\\n\\n<div class=\\"Mc\\">\\n    <div class=\\"Hc\\">\\n        <div class=\\"hB\\">\\n            <button on:click={() => goto('/admin')}>\\n                <i class=\\"fa-solid fa-arrow-left\\"></i>\\n                <p>Inicio</p>\\n            </button>\\n            <button on:click={authHandlers.logout}>\\n                <i class=\\"fa-solid fa-right-from-bracket\\"></i>\\n                <p>Cerrar Sesión</p>\\n            </button>\\n        </div>\\n    </div>\\n</div>\\n\\n{#if !$formSubmitted}\\n<div class=\\"main-container\\">\\n    <h1>Buscar Migrante para Cambiar Estatus</h1>\\n    <form on:submit|preventDefault={buscar} class=\\"form-container\\">\\n        <div class=\\"form-group\\">\\n            <label for=\\"nombrecompleto\\">Nombre Completo:</label>\\n            <input type=\\"text\\" id=\\"nombrecompleto\\" bind:value={nombrecompleto} required>\\n        </div>\\n        <div class=\\"form-group\\">\\n            <label for=\\"fechanacimiento\\">Fecha de Nacimiento:</label>\\n            <input type=\\"date\\" id=\\"fechanacimiento\\" bind:value={fechanacimiento} required>\\n        </div>\\n        <button type=\\"submit\\">Buscar</button>\\n    </form>\\n\\n    {#if $error}\\n        <p class=\\"error-message\\">{$error}</p>\\n    {/if}\\n</div>\\n{/if}\\n\\n{#if $resultadoBusqueda}\\n    <h2 class=\\"section-title\\">Editar Estatus del Migrante a Inactivo</h2>\\n    <div class=\\"main-container\\">\\n        <div class=\\"card\\">\\n            {#each $resultadoBusqueda.data as migrante}\\n                {#each Object.entries(migrante) as [key, value]}\\n                    {#if key == 'nombrecompleto' || key == 'fechanacimiento'}\\n                        <div class=\\"card-row\\">\\n                            <span class=\\"card-key\\">{preguntas[key.toLowerCase()] || key}:</span>\\n                            <span class=\\"card-value\\">{value}</span>\\n                        </div>\\n                    {/if}\\n                {/each}\\n            {/each}\\n        </div>\\n        <form on:submit|preventDefault={darDeBaja} class=\\"form-container\\">\\n            <div class=\\"form-group\\">\\n                <label for=\\"ultimaFecha\\">Último Día en Casa Monarca:</label>\\n                <input type=\\"date\\" id=\\"ultimaFecha\\" bind:value={ultimaFecha} required>\\n            </div>\\n            <button type=\\"submit\\">Cambiar de Estatus a Inactivo</button>\\n        </form>\\n    </div>\\n{/if}\\n\\n<style>\\n    body {\\n        font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;\\n        background-color: #e0e0e0;\\n        margin: 0;\\n        display: flex;\\n        justify-content: center;\\n        align-items: center;\\n        height: 100vh;\\n    }\\n\\n    .main-container {\\n        width: 100%;\\n        max-width: 600px;\\n        margin: auto;\\n        padding: 20px;\\n        background: #fff;\\n        border-radius: 10px;\\n        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\\n        text-align: center;\\n        margin-bottom: 30vh;\\n    }\\n\\n    .Mc {\\n        display: flex;\\n        flex-direction: column;\\n        min-height: 10vh;\\n        gap: 24px;\\n        padding: 24px;\\n        width: 26%;\\n        max-width: 1000px;\\n        margin: 0 auto;\\n        margin-right: 10%;\\n        font-size: 13px;\\n    }\\n\\n    .hB button {\\n        background: #d93443;\\n        color: white;\\n        padding: 15px 15px;\\n        border: none;\\n        border-radius: 4px;\\n        font-weight: 700;\\n        display: flex;\\n        align-items: center;\\n        gap: 4px;\\n    }\\n\\n    .hB button:hover {\\n        opacity: 0.7;\\n        background-color: #fa6a02;\\n        cursor: pointer;\\n    }\\n\\n    .hB {\\n        display: flex;\\n        align-items: center;\\n        gap: 10px;\\n    }\\n\\n    .form-container {\\n        margin-bottom: 20px;\\n    }\\n\\n    .form-group {\\n        margin-bottom: 15px;\\n        text-align: left;\\n    }\\n\\n    label {\\n        display: block;\\n        font-size: 0.9em;\\n        margin-bottom: 5px;\\n        color: #333;\\n    }\\n\\n    input[type=\\"text\\"], input[type=\\"date\\"] {\\n        width: 100%;\\n        padding: 10px;\\n        border: 1px solid #ccc;\\n        border-radius: 5px;\\n        font-size: 1em;\\n        box-sizing: border-box;\\n    }\\n\\n    button {\\n        width: 100%;\\n        padding: 10px;\\n        background: #d93443;\\n        color: white;\\n        border: none;\\n        border-radius: 5px;\\n        cursor: pointer;\\n        font-size: 1em;\\n    }\\n\\n    button:hover {\\n        opacity: 0.7;\\n        background-color: #fa6a02;\\n    }\\n\\n    .section-title {\\n        margin-top: 20px;\\n        margin-bottom: 10px;\\n        color: black;\\n        text-align: center;\\n        margin-top: 40px;\\n        font-size: 30px;\\n    }\\n\\n    .card {\\n        background: #f8f9fa;\\n        padding: 15px;\\n        border: 1px solid #e9ecef;\\n        border-radius: 5px;\\n        margin-bottom: 10px;\\n        width: 100%;\\n    }\\n\\n    .card-row {\\n        display: block;\\n        padding: 5px 0;\\n        text-align: left;\\n    }\\n\\n    .card-key {\\n        font-weight: bold;\\n    }\\n\\n    .card-value {\\n        display: block;\\n        text-align: left;\\n        margin-left: 10px;\\n    }\\n\\n    .error-message {\\n        font-size: 1.2em;\\n        color: red;\\n        text-align: center;\\n        margin-top: 20px;\\n    }\\n</style>\\n"],"names":[],"mappings":"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"}`
};
const Page = create_ssr_component(($$result, $$props, $$bindings, slots) => {
  let $formSubmitted, $$unsubscribe_formSubmitted;
  let $error, $$unsubscribe_error;
  let $resultadoBusqueda, $$unsubscribe_resultadoBusqueda;
  let nombrecompleto = "";
  let fechanacimiento = "";
  let ultimaFecha = "";
  let resultadoBusqueda = writable(null);
  $$unsubscribe_resultadoBusqueda = subscribe(resultadoBusqueda, (value) => $resultadoBusqueda = value);
  let error = writable("");
  $$unsubscribe_error = subscribe(error, (value) => $error = value);
  let formSubmitted = writable(false);
  $$unsubscribe_formSubmitted = subscribe(formSubmitted, (value) => $formSubmitted = value);
  const preguntas = {
    nombrecompleto: "Nombre completo",
    fechanacimiento: "Fecha de nacimiento",
    ultimaFecha: "Último día en Casa Monarca"
  };
  $$result.css.add(css);
  $$unsubscribe_formSubmitted();
  $$unsubscribe_error();
  $$unsubscribe_resultadoBusqueda();
  return `<div class="Mc svelte-apnljb"><div class="Hc"><div class="hB svelte-apnljb"><button class="svelte-apnljb" data-svelte-h="svelte-92lfck"><i class="fa-solid fa-arrow-left"></i> <p>Inicio</p></button> <button class="svelte-apnljb" data-svelte-h="svelte-1p6l6vt"><i class="fa-solid fa-right-from-bracket"></i> <p>Cerrar Sesión</p></button></div></div></div> ${!$formSubmitted ? `<div class="main-container svelte-apnljb"><h1 data-svelte-h="svelte-1qnd3ub">Buscar Migrante para Cambiar Estatus</h1> <form class="form-container svelte-apnljb"><div class="form-group svelte-apnljb"><label for="nombrecompleto" class="svelte-apnljb" data-svelte-h="svelte-ttl2ka">Nombre Completo:</label> <input type="text" id="nombrecompleto" required class="svelte-apnljb"${add_attribute("value", nombrecompleto, 0)}></div> <div class="form-group svelte-apnljb"><label for="fechanacimiento" class="svelte-apnljb" data-svelte-h="svelte-1w0esq5">Fecha de Nacimiento:</label> <input type="date" id="fechanacimiento" required class="svelte-apnljb"${add_attribute("value", fechanacimiento, 0)}></div> <button type="submit" class="svelte-apnljb" data-svelte-h="svelte-ouicbz">Buscar</button></form> ${$error ? `<p class="error-message svelte-apnljb">${escape($error)}</p>` : ``}</div>` : ``} ${$resultadoBusqueda ? `<h2 class="section-title svelte-apnljb" data-svelte-h="svelte-kn5emp">Editar Estatus del Migrante a Inactivo</h2> <div class="main-container svelte-apnljb"><div class="card svelte-apnljb">${each($resultadoBusqueda.data, (migrante) => {
    return `${each(Object.entries(migrante), ([key, value]) => {
      return `${key == "nombrecompleto" || key == "fechanacimiento" ? `<div class="card-row svelte-apnljb"><span class="card-key svelte-apnljb">${escape(preguntas[key.toLowerCase()] || key)}:</span> <span class="card-value svelte-apnljb">${escape(value)}</span> </div>` : ``}`;
    })}`;
  })}</div> <form class="form-container svelte-apnljb"><div class="form-group svelte-apnljb"><label for="ultimaFecha" class="svelte-apnljb" data-svelte-h="svelte-1akwpga">Último Día en Casa Monarca:</label> <input type="date" id="ultimaFecha" required class="svelte-apnljb"${add_attribute("value", ultimaFecha, 0)}></div> <button type="submit" class="svelte-apnljb" data-svelte-h="svelte-1t86dxw">Cambiar de Estatus a Inactivo</button></form></div>` : ``}`;
});
export {
  Page as default
};
